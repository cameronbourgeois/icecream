// Generated by CoffeeScript 1.3.1
var Game,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

Game = (function() {

  function Game() {
    this.startGame = __bind(this.startGame, this);
    this.fps = 60;
    this.levelNum = 1;
    this.canvas = document.getElementById('battlefield');
    this.context = this.canvas.getContext('2d');
    this.context_width = this.canvas.width;
    this.context_height = this.canvas.height;
    this.bg = new Image();
    this.bg.src = $(window.assets.getAsset('/assets/images/game/bg-sky.jpg')).attr('src');
    this.reset();
    $('#start_game').on('click', this.startGame);
  }

  Game.prototype.reset = function() {
    delete this.level;
    this.drawBG();
    return this.showMenu();
  };

  Game.prototype.drawBG = function() {
    return this.context.drawImage(this.bg, 0, 0);
  };

  Game.prototype.startGame = function(e) {
    e.preventDefault();
    if (!this.level) {
      this.hideMenu();
      this.playing = true;
      return this.level = new Level(this);
    }
  };

  Game.prototype.showMenu = function() {
    return $('#menu').removeClass('hidden');
  };

  Game.prototype.hideMenu = function() {
    return $('#menu').addClass('hidden');
  };

  return Game;

})();
