// Generated by CoffeeScript 1.3.1
var Explosion,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor; child.__super__ = parent.prototype; return child; };

Explosion = (function(_super) {

  __extends(Explosion, _super);

  function Explosion(level, x, y) {
    Explosion.__super__.constructor.call(this, 'explosion', level);
    this.level = level;
    this.x = x;
    this.y = y;
    this.xAcceleration = 0;
    this.yAcceleration = -1;
    this.opacity = 1;
    this.sizeMod = 0;
  }

  Explosion.prototype.update = function() {
    var ySpeed;
    this.opacity = this.opacity - 0.05;
    if (this.opacity <= 0) {
      this.destroy();
    }
    if (Math.random() > 0.5) {
      this.sizeMod = 1;
    } else {
      this.sizeMod = -2;
    }
    if (this.level.speedModifier !== 1) {
      ySpeed = this.yAcceleration * this.level.speedModifier;
    } else {
      ySpeed = this.yAcceleration;
    }
    if (this.y + ySpeed > 0 && this.y + ySpeed + this.height < this.level.context_height) {
      return this.y = this.y + ySpeed;
    } else {
      return this.destroy();
    }
  };

  Explosion.prototype.draw = function() {
    this.level.context.globalAlpha = this.opacity;
    this.level.context.drawImage(this.sprite, this.x, this.y, this.width + this.sizeMod, this.height + this.sizeMod);
    return this.level.context.globalAlpha = 1;
  };

  return Explosion;

})(Sprite);
