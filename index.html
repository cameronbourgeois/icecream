<!DOCTYPE html> 
<html>
	
	

<head>
	<meta charset=UTF-8>
	<title>Ice Cream Attack!</title>
	
	<link rel="stylesheet" type="text/css" href="/assets/stylesheets/style.css" />
</head>

<body>
	
	<progress id="assetprogress" value="0" max="1"></progress>
	
	<canvas id="battlefield" width="400" height="600">Get a better browser.</canvas>
	
	<div class="wrapper">
		<div id="messages" class="interface hidden">
			<div id="level_header" class="level_1"></div>
		</div>
		<div id="menu" class="interface hidden">
			<div id="logo"></div>
			<a id="start_game" href="javascript:void(0)" title="Start Game">Start Game</a>
		</div>
		<div id="hud" class="interface hidden">
			<div class="health_wrapper">
				<div id="health" class="health_0"></div>
			</div>
			<div class="bonus_wrapper">

			</div>
			<div class="points_wrapper">
				<div id="points">0</div>
			</div>
		</div>
	</div>
	
	<script type="text/javascript" src="/assets/javascripts/vendor/jquery.js"></script>
	
	<script type="text/javascript" src="/assets/javascripts/vendor/preloadjs/src/preloadjs/AbstractLoader.js"></script>
	<script type="text/javascript" src="/assets/javascripts/vendor/preloadjs/src/preloadjs/PreloadJS.js"></script>
	<script type="text/javascript" src="/assets/javascripts/vendor/preloadjs/src/preloadjs/TagLoader.js"></script>
	<script type="text/javascript" src="/assets/javascripts/vendor/preloadjs/src/preloadjs/XHRLoader.js"></script>
	
	<script type="text/javascript">
		
		// Using PreloadJS
		
		window.manifest = [
			// Javascripts
			'/assets/javascripts/vendor/underscore.js',
			
			'/assets/javascripts/game/game.js',
			
			'/assets/javascripts/game/level/level.js',
			'/assets/javascripts/game/level/levelone.js',
			'/assets/javascripts/game/level/leveltwo.js',
			'/assets/javascripts/game/level/levelthree.js',
			'/assets/javascripts/game/level/levelfour.js',
			'/assets/javascripts/game/level/levelfive.js',
			
			'/assets/javascripts/game/sprite.js',
			
			'/assets/javascripts/game/baddies/baddie.js',
			'/assets/javascripts/game/baddies/bananaconebaddie.js',
			'/assets/javascripts/game/baddies/bananapopbaddie.js',
			'/assets/javascripts/game/baddies/pistachioconebaddie.js',
			'/assets/javascripts/game/baddies/pistachiopopbaddie.js',
			'/assets/javascripts/game/baddies/strawberryconebaddie.js',
			'/assets/javascripts/game/baddies/strawberrypopbaddie.js',
			'/assets/javascripts/game/baddies/chocolateconebaddie.js',
			'/assets/javascripts/game/baddies/chocolatepopbaddie.js',
			'/assets/javascripts/game/baddies/licoriceconebaddie.js',
			'/assets/javascripts/game/baddies/licoricepopbaddie.js',
			
			'/assets/javascripts/game/player.js',
			
			'/assets/javascripts/game/drop/drop.js',
			'/assets/javascripts/game/drop/healthdrop.js',
			'/assets/javascripts/game/drop/speeddrop.js',
			'/assets/javascripts/game/drop/slowdrop.js',
			'/assets/javascripts/game/drop/poisondrop.js',
			'/assets/javascripts/game/drop/bombdrop.js',
			
			'/assets/javascripts/game/bullet.js',
			'/assets/javascripts/game/explosion.js',
		
			// Graphics
			{id:'bananapopbaddie',src:'/assets/images/game/banana01.png'},
			{id:'bananaconebaddie',src:'/assets/images/game/banana02.png'},
			{id:'pistachiopopbaddie',src:'/assets/images/game/pistachio01.png'},
			{id:'pistachioconebaddie',src:'/assets/images/game/pistachio02.png'},
			{id:'strawberrypopbaddie',src:'/assets/images/game/strawberry01.png'},
			{id:'strawberryconebaddie',src:'/assets/images/game/strawberry02.png'},
			{id:'chocolatepopbaddie',src:'/assets/images/game/chocolate01.png'},
			{id:'chocolateconebaddie',src:'/assets/images/game/chocolate02.png'},
			{id:'licoricepopbaddie',src:'/assets/images/game/licorice01.png'},
			{id:'licoriceconebaddie',src:'/assets/images/game/licorice02.png'},
			
			{id:'explosion',src:'/assets/images/game/explosion.png'},
			
			{id:'background',src:'/assets/images/game/bg-sky.jpg'},
			
			{id:'btn-start',src:'/assets/images/game/bt-start.png'},
			
			{id:'levelone-bg',src:'/assets/images/game/bg-sky.jpg'},
			{id:'levelone',src:'/assets/images/game/level01.png'},
			{id:'leveltwo-bg',src:'/assets/images/game/bg-desert-lv2.jpg'},
			{id:'leveltwo',src:'/assets/images/game/level02.png'},
			{id:'levelthree-bg',src:'/assets/images/game/bg-japan-lv3.jpg'},
			{id:'levelthree',src:'/assets/images/game/level03.png'},
			{id:'levelfour-bg',src:'/assets/images/game/bg-undersea-lv4.jpg'},
			{id:'levelfour',src:'/assets/images/game/level04.png'},
			{id:'levelfive-bg',src:'/assets/images/game/bg-space-lv5.jpg'},
			{id:'levelfive',src:'/assets/images/game/level05.png'},
			
			{id:'player2',src:'/assets/images/game/player.png'},
			{id:'player2-rocket',src:'/assets/images/game/player-rocket.png'},
			{id:'player',src:'/assets/images/game/player02.png'},
			{id:'player-rocket',src:'/assets/images/game/player02-rocket.png'},
			
			{id:'bullet',src:'/assets/images/game/bullet-red.png'},
			
			{id:'healthdrop',src:'/assets/images/game/bonus-life.png'},
			{id:'healthdrop-ghost',src:'/assets/images/game/cloud-bonus-life.png'},
			{id:'speeddrop',src:'/assets/images/game/bonus-speed.png'},
			{id:'speeddrop-ghost',src:'/assets/images/game/cloud-bonus-speed.png'},
			{id:'slowdrop',src:'/assets/images/game/bonus-slow.png'},
			{id:'slowdrop-ghost',src:'/assets/images/game/cloud-bonus-slow.png'},
			{id:'poisondrop',src:'/assets/images/game/bonus-poison.png'},
			{id:'poisondrop-ghost',src:'/assets/images/game/cloud-bonus-poison.png'},
			{id:'bombdrop',src:'/assets/images/game/bonus-pchhbomb.png'},
			{id:'bombdrop-ghost',src:'/assets/images/game/cloud-bonus-pchhbomb.png'}
		];
		
		
		$(function(){
			
			preload = new createjs.PreloadJS();
			preload.onProgress = function(event) {
				$('#assetprogress').val(event.loaded);
			}
			preload.onError = function(event) {
				alert("Error downloading asset:\n"+event.src);
			}
			preload.onFileLoad = function(event) {
				if (event.type == 'javascript')
				{
					$.getScript(event.src);
				}
			}
			preload.setMaxConnections(5);
			preload.loadManifest(window.manifest);
			preload.onComplete = function(event) {
				$('#assetprogress').hide();
				window.game = new Game();
			}
		})
		
		var getImage = function(handle) {
			var img = new Image();
			img.src = preload.getResult(handle).src;
			return img;
		}
		
		var getParameterByName = function(name) {
		  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
		  var regexS = "[\\?&]" + name + "=([^&#]*)";
		  var regex = new RegExp(regexS);
		  var results = regex.exec(window.location.search);
		  if(results == null)
			return "";
		  else
			return decodeURIComponent(results[1].replace(/\+/g, " "));
		}
		
	</script>

</body>

</html>